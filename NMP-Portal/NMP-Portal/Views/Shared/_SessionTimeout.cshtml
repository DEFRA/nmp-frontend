@inject Microsoft.AspNetCore.Http.IHttpContextAccessor HttpContextAccessor
@using GovUk.Frontend.AspNetCore
@using Microsoft.Extensions.Options
@using NMP.Commons.Resources
@inject IOptions<SessionOptions> SessionOptions
@{
    // Read IdleTimeout from session configuration
    var timeoutMinutes = SessionOptions.Value.IdleTimeout.TotalMinutes;
    var warningMinutes = 3; // warn 3 min before expiry
    var warningSeconds = $"{warningMinutes} minutes";
}

<!-- Desktop modal -->
<div class="govuk-!-display-none" id="session-timeout-dialog" role="dialog"
     aria-labelledby="session-timeout-title"
     aria-describedby="session-timeout-message"
     aria-modal="true">
    <div class="dialog-container">
    <govuk-notification-banner type="NotificationBannerType.Default">
        <govuk-notification-banner-title heading-level="2" id="banner-title">
            @Resource.lblSessionTimeoutBoxHeading
        </govuk-notification-banner-title>        
        <div class="margin-bottom-forty">@Resource.lblSessionTimeoutBoxContent @warningSeconds.</div> @* <span id="countdown">@warningSeconds</span> *@
        <div>
         <govuk-button type="button" data-prevent-double-click="true"  id="stay-signed-in">@Resource.lblStaySignedIn</govuk-button>       
        </div>
        <div class="govuk-body cancel-link">
            @Resource.lblYouCanAlso <a class="govuk-link" id="sign-out" asp-action="Logout" asp-controller="Account">@Resource.lblSignoutnow</a>.
        </div>
    </govuk-notification-banner>
    </div>
</div>

<script type="text/javascript" asp-add-nonce="true" asp-append-version="true">
    window.sessionConfig = {
        timeoutMinutes: parseInt("@timeoutMinutes"),
        warningMinutes: parseInt("@warningMinutes"),
        logoutUrl: '/Account/Logout',
        keepAliveUrl: '/Session/KeepAlive'
    };
</script>
<script type="text/javascript" src="~/assets/javascripts/session-timeout.js" asp-add-nonce="true" asp-append-version="true"></script>